map = {as} @n {f sx} ->
  case xs{} of
    Nil {} -> Nil {}
    Cons {y ys} -> let fy = {f y} @u {} -> f {y}
                       mfy = {f ys} @u {} -> map {f ys}
                   in Cons {fy mfy}
    default -> Nil {}

sum = {} @n {f sx} ->
  case xs{} of
    Nil {} -> 0
    Cons {y ys} -> let sys = {ys} @u {} -> sum {ys}
                   in + {y sys}
    default -> Nil {}

add3 = {} @n {x} -> + {x 3}

main = {} @n {} ->
    letrec empty = {} @u {} -> Nil {}
           lst = {} @u {} -> Cons {3 empty}
           mapped =  {} @u {} -> map {add3 lst}
           in sum {mapped}
